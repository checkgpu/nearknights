poly = [
%{name: "Goblin", id: 1, texture: "", attack_speed: 60, rarity: "common"},
%{name: "Goblin Spear", id: 2, texture: "", attack_speed: 60, rarity: "common"},
%{name: "Goblin Elite", id: 3, texture: "", attack_speed: 60, rarity: "common"},
%{name: "Orc Sword Warrior", id: 4, texture: "", attack_speed: 60, rarity: "common"},
%{name: "Orc Axe Warrior", id: 5, texture: "", attack_speed: 60, rarity: "common"},
%{name: "Werewolf", id: 6, texture: "", attack_speed: 60, rarity: "common"},
%{name: "Zombie", id: 7, texture: "", attack_speed: 60, rarity: "common"},
%{name: "", id: 8, texture: "", attack_speed: 60, rarity: "common"},
%{name: "", id: 9, texture: "", attack_speed: 60, rarity: "common"},
%{name: "", id: 10, texture: "", attack_speed: 60, rarity: "common"},
%{name: "", id: 11, texture: "", attack_speed: 60, rarity: "common"},
%{name: "", id: 12, texture: "", attack_speed: 60, rarity: "common"},
%{name: "", id: 13, texture: "", attack_speed: 60, rarity: "common"},
%{name: "", id: 14, texture: "", attack_speed: 60, rarity: "common"},
%{name: "", id: 15, texture: "", attack_speed: 60, rarity: "common"},
%{name: "", id: 16, texture: "", attack_speed: 60, rarity: "common"},
%{name: "", id: 17, texture: "", attack_speed: 60, rarity: "common"},
%{name: "", id: 18, texture: "", attack_speed: 60, rarity: "common"},
%{name: "", id: 19, texture: "", attack_speed: 60, rarity: "common"},
%{name: "", id: 20, texture: "", attack_speed: 60, rarity: "common"},
%{name: "", id: 21, texture: "", attack_speed: 60, rarity: "common"},

%{name: "Lycanthrope", id: 100, texture: "", attack_speed: 120, hit: 1, rarity: "uncommon"},
%{name: "", id: 101, texture: "", attack_speed: 120, damage: 1, rarity: "uncommon"},
%{name: "", id: 102, texture: "", attack_speed: 120, dr: 1, rarity: "uncommon"},
%{name: "", id: 103, texture: "", attack_speed: 120, ac: 1, rarity: "uncommon"},
%{name: "", id: 104, texture: "", attack_speed: 110, hit: 1, rarity: "uncommon"},
%{name: "", id: 105, texture: "", attack_speed: 110, hit: 1, rarity: "uncommon"},
%{name: "", id: 106, texture: "", attack_speed: 110, hit: 1, rarity: "uncommon"},
%{name: "", id: 107, texture: "", attack_speed: 110, hit: 1, rarity: "uncommon"},
%{name: "", id: 108, texture: "", attack_speed: 110, hit: 1, rarity: "uncommon"},
%{name: "", id: 109, texture: "", attack_speed: 110, hit: 1, rarity: "uncommon"},
%{name: "", id: 110, texture: "", attack_speed: 110, hit: 1, rarity: "uncommon"},
%{name: "", id: 111, texture: "", attack_speed: 110, hit: 1, rarity: "uncommon"},
%{name: "", id: 112, texture: "", attack_speed: 110, hit: 1, rarity: "uncommon"},
%{name: "", id: 113, texture: "", attack_speed: 110, hit: 1, rarity: "uncommon"},
%{name: "", id: 114, texture: "", attack_speed: 110, hit: 1, rarity: "uncommon"},
%{name: "", id: 115, texture: "", attack_speed: 110, hit: 1, rarity: "uncommon"},
%{name: "", id: 116, texture: "", attack_speed: 110, hit: 1, rarity: "uncommon"},
%{name: "", id: 117, texture: "", attack_speed: 110, hit: 1, rarity: "uncommon"},
%{name: "", id: 118, texture: "", attack_speed: 110, hit: 1, rarity: "uncommon"},
%{name: "", id: 119, texture: "", attack_speed: 110, hit: 1, rarity: "uncommon"},
%{name: "", id: 120, texture: "", attack_speed: 110, hit: 1, rarity: "uncommon"},

%{name: "", id: 200, texture: "", attack_speed: 250, hit: 2, rarity: "rare"},
%{name: "", id: 201, texture: "", attack_speed: 250, damage: 2, rarity: "rare"},
%{name: "", id: 202, texture: "", attack_speed: 250, ac: 1, dr: 1, rarity: "rare"},
%{name: "", id: 203, texture: "", attack_speed: 240, damage: 1, ac: 1, rarity: "rare"},
%{name: "", id: 204, texture: "", attack_speed: 240, hit: 1, damage: 1, rarity: "rare"},
%{name: "", id: 205, texture: "", attack_speed: 230, hit: 1, rarity: "rare"},
%{name: "", id: 206, texture: "", attack_speed: 220, damage: 1, rarity: "rare"},
%{name: "", id: 207, texture: "", attack_speed: 210, hp_regen: 4, rarity: "rare"},
%{name: "", id: 208, texture: "", attack_speed: 210, ac: 1, rarity: "rare"},
%{name: "", id: 209, texture: "", attack_speed: 210, ac: 1, rarity: "rare"},
%{name: "", id: 210, texture: "", attack_speed: 210, int: 1, dr: 1, rarity: "rare"},
%{name: "", id: 211, texture: "", attack_speed: 210, int: 1, dr: 1, rarity: "rare"},
%{name: "", id: 212, texture: "", attack_speed: 210, ac: 1, rarity: "rare"},
%{name: "", id: 213, texture: "", attack_speed: 210, damage: 1, rarity: "rare"},
%{name: "", id: 214, texture: "", attack_speed: 210, damage: 1, rarity: "rare"},
%{name: "", id: 215, texture: "", attack_speed: 210, damage: 1, rarity: "rare"},
%{name: "", id: 216, texture: "", attack_speed: 210, hit: 1, rarity: "rare"},
%{name: "", id: 217, texture: "", attack_speed: 210, dex: 1, hit: 1, rarity: "rare"},
%{name: "", id: 218, texture: "", attack_speed: 210, str: 1, hit: 1, rarity: "rare"},
%{name: "", id: 219, texture: "", attack_speed: 210, hit: 1, rarity: "rare"},
%{name: "", id: 220, texture: "", attack_speed: 210, hit: 1, rarity: "rare"},
%{name: "", id: 221, texture: "", attack_speed: 200, ac: 3, rarity: "rare"},

%{name: "", id: 300, texture: "", attack_speed: 480, str: 2, damage: 3, rarity: "epic"},
%{name: "", id: 301, texture: "", attack_speed: 480, dex: 2, hit: 3, rarity: "epic"},
%{name: "", id: 302, texture: "", attack_speed: 480, int: 2, ac: 3, dr: 1, rarity: "epic"},
%{name: "", id: 303, texture: "", attack_speed: 480, hit: 1, mr: 10, rarity: "epic"},
%{name: "", id: 304, texture: "", attack_speed: 460, hit: 2, rarity: "epic"},
%{name: "", id: 305, texture: "", attack_speed: 460, damage: 2, rarity: "epic"},
%{name: "", id: 306, texture: "", attack_speed: 460, int: 1, mp_regen: 3, hit: 3, rarity: "epic"},
%{name: "", id: 307, texture: "", attack_speed: 400, str: 1, hp_regen: 2, rarity: "epic"},

%{name: "", id: 400, texture: "", attack_speed: 730, hit: 3, damage: 3, ac: 3, dr: 2, rarity: "legendary"},
%{name: "", id: 401, texture: "", attack_speed: 760, hit: 3, damage: 3, dr: 2, rarity: "legendary"},
%{name: "", id: 402, texture: "", attack_speed: 760, str: 3, dex: 3, int: 3, ac: 3, dr: 2, rarity: "legendary"},
]

poly_bin = Enum.reduce(poly, "", fn(item, acc)->
    var = "poly_#{item.id}"
    acc = acc <> "var #{var} = new Polymorph(#{item.id});\n"
    acc <> Enum.reduce(item, "", fn({k,v},acc)->
        cond do
            is_binary(v) ->
                acc <> "#{var}.#{k}=\"#{v}\"; "
            true ->
                acc <> "#{var}.#{k}=#{v}; "
        end
    end) <> "\n"
end)

poly_map_bin = Enum.reduce(poly, "", fn(item, acc)->
    var = "poly_#{item.id}"
    acc <> "poly.set(#{item.id}, #{var})\n"
end)

#These go into smart contract
IO.puts """
#{poly_bin}
const poly = new Map<u64, Polymorph>()
#{poly_map_bin}
"""
